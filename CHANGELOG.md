# 更新日志 (CHANGELOG)

## [未发布] - 2025-10-14

### 新增功能
- ✨ **实时置信度显示**: 现在每条消息都会在控制台打印详细的检测结果
  - 显示用户信息
  - 显示消息内容预览（前100字符）
  - 显示是否判定为垃圾消息
  - **显示详细置信度**（百分比和小数形式）
  - 显示分类类型
  - 显示判定理由
  - 显示处理方式

- 📢 **频道信息检测**: 增强频道相关消息的检测和显示
  - 检测并显示频道转发信息（频道名称、用户名）
  - 显示消息中包含的所有链接
  - 显示媒体类型（图片、视频、文件等）
  - 在 LLM 分析中包含频道转发和链接信息
  - 新增 `channel_spam` 垃圾消息类型

### 改进
- 📊 增强日志输出：正常消息也会记录详细信息
- 🎨 美化控制台输出：使用分隔线和 emoji 图标
- 📝 跳过的消息也会显示基本信息
- 🔗 更好地提取和显示消息实体（链接、提及等）
- 🎯 更新检测提示词，加强对频道推广的识别

### 输出示例

**正常消息：**
```
================================================================================
📨 新消息检测
👤 用户: alice (ID: 123456789)
💬 内容: 大家好，很高兴认识大家！
🎯 垃圾消息判定: 否 ✅
📊 置信度: 12.50% (0.1250)
📋 类型: normal
💡 理由: 这是正常的问候消息，没有广告或恶意内容
🔧 处理: 保留
================================================================================
```

**广告消息：**
```
================================================================================
📨 新消息检测
👤 用户: spammer (ID: 987654321)
💬 内容: 加微信 xxx 免费领取资料，仅限今天！
🎯 垃圾消息判定: 是 ❌
📊 置信度: 95.00% (0.9500)
📋 类型: advertisement
💡 理由: 包含明显的商业广告和推广内容
🔧 处理: 删除+封禁
================================================================================
```

**频道推广消息：**
```
================================================================================
📨 新消息检测
👤 用户: channel_spammer (ID: 111222333)
💬 内容: 快来关注我们的频道，每天分享优质内容！
📢 转发自频道: 推广频道 (@spam_channel)
🔗 包含链接: https://t.me/spam_channel
📎 媒体类型: 图片
🎯 垃圾消息判定: 是 ❌
📊 置信度: 88.00% (0.8800)
📋 类型: channel_spam
💡 理由: 转发频道消息并包含推广链接
🔧 处理: 删除+封禁
================================================================================
```

## [1.0.0] - 2025-10-14

### 初始版本
- 🤖 基础 Telegram Bot 功能
- 🧠 LLM 集成垃圾消息检测
- ⚙️ 配置管理
- 📚 完整文档
- 🐳 Docker 支持
- 🚀 多平台部署支持
